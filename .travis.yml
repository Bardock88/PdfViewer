sudo: required
language: android
jdk: oraclejdk8
before_cache:
- rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
- rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
  - "$HOME/.gradle/caches/"
  - "$HOME/.gradle/wrapper/"
  - "$HOME/.android/build-cache"
android:
  components:
  - platform-tools
  - tools
  - build-tools-28.0.3
  - android-28
  - extra-android-m2repository
before_script:
- chmod +x gradlew
script:
- "./gradlew build --stacktrace"
deploy:
  provider: releases
  api_key:
    secure: dvlyMy1EquQm/bjCnS2vjkVwGwzo6ag+XjQxZpI8GcUYo4hF4PPb9et1GkfvnECDo4h7Cz/stJ4RVenKOO38IQvfsVnJrKl7Y0STu0kWXscwMIN1uAob/8MV6yZrruh2AW7diKMH5LklPHDJlLicKxymDkyLbJfQk3djQhA7UGvrC+onEShaO43Rhqk1uIye/teXW+QyoCs6lVj0yHqnBG9iUtpMo0NvO1FBuj7jK+Bf7R0cqEl/GKPnfnxLLGH8UTYdXq+CJ9M0zW86eAtZAYazPkFSUUeqjORoI7hFS4ZPsSoffkaFF63oxgt6vBqspYq1nn2gJHZgEUZ+0GArhP2o8rI3GAfa9TzzcnVNORID0jua6JkGtFIOfRdXtTwTluOhX0iqLSUB8A+6kBuPkCHYa6J+ciaqK0cu4/RIRXq+zwJacFGTQNPIvk1HkLXCUCUS92BBgbkjOHWTR3hzaKycFifTjJ+3DhdYUNUcOd4JLrtazVSZ13FOURC8jC2F3cwlzzR+W1bsl/lyYYa5MlCW1DRerk76BrD9cfmwDuF572qyfeRvn9hSDYTrtCE1ss9b8S3dbTwSjNDpzzzJhVGm71E6NAC/b5JlBech8XRUzx3yYhWDmMbA0vtqn9nr6MdIUfC1dwOABtLpRwhY2/LlSVO9cHBhaS6AzYOimOU=
  file: PdfViewer/build/outputs/apk/PdfViewer*release*.apk
  file_glob: "true"
  skip_cleanup: true
  on:
    branch: master
    repo: JavaCafe01/PdfViewer

after_success:
- sh set_tags.sh
